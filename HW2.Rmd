---
title: "p8105_hw2_NL2836"
author: "Ngan Le"
date: "2023-10-04"
output: github_document
---

Load the necessary libraries. 

```{r setup, message=FALSE}
library(tidyverse)
library(readr)
```

# Problem 1 

Read the dataset pols-month into R Studio, then clean up accordingly.

```{r load pols, message = FALSE}
pols_data = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, into = c("year","month","day"), sep = "-") %>%
  mutate(
    month = month.abb[as.integer(month)],
    president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem",
      TRUE ~ NA_character_)
  ) %>% 
  select(-prez_dem, -prez_gop, -day)

view(pols_data)
```

Read the dataset snp into R Studio, then clean up accordingly.

```{r load snp, message = FALSE}
snp_data = 
  read_csv("./fivethirtyeight_datasets/snp.csv") %>% 
  mutate(
    date = as.Date(date, format = "%m/%d/%y"),
    year = format(date, "%Y"),
    month = format(date, "%m"),
    month = month.abb[as.integer(month)]
  ) %>%
  select(-date) %>%
  arrange(year, month) %>% 
  select(year, month, everything())

view(snp_data)
```

Read the dataset unemployment into R Studio, then clean up accordingly.

```{r load unemp, message = FALSE}
unemp_data = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment_rate") %>% 
  rename(year = Year) %>% 
  mutate(year = as.character(year))

view(unemp_data)
```

Merge the 3 datasets.

```{r merge datasets}
merged_data = pols_data %>% 
  left_join(snp_data, by = c("year", "month")) %>% 
  left_join(unemp_data, by = c("year", "month"))
  
view(merged_data)
```

View the merged dataset and short description.

```{r}
view(merged_data)
```


The merged dataset `merged_data` from the 3 datasets `pols_data`, `snp_data`, `unemp_data` contains: 

- The information on the number of Republican and Democratic senators (`gop_sen`, `dem_sen`) and presidents (`president`), the closing values of the S&P stock index (`close`), and unemployment rate (`unemployment_rate`); all reported monthly from 1947 to 2015.
- `r ncol(merged_data)` columns (variables), and `r nrow(merged_data)` rows (observations).
- Each of the three dataset was modified to have the variables `year` and `month`.
- Additionally, `snp_data` contains the the closing values of the S&P stock index (`close`); `unemp_data` contains the unemployment rate (`unemployment_rate`); the rest of the mentioned variables are `pols_data`.



